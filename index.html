<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>sys32.exe</title>
  <meta name="color-scheme" content="dark" />
  <style>
    :root {
      --green: #00ff66;
      --dark: #020402;
      --dim:  rgba(0,255,102,0.25);
      --scan: rgba(0,255,102,0.08);
    }
    html, body {
      height: 100%;
      margin: 0;
      background: radial-gradient(ellipse at center, #000 0%, #000 40%, #001a0c 100%);
      color: var(--green);
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono",
                   "Courier New", monospace;
      letter-spacing: 0.5px;
      overflow: hidden;
    }
    .crt {
      position: relative;
      height: 100%;
      display: grid;
      place-items: center;
      user-select: none;
      text-shadow: 0 0 6px var(--dim), 0 0 18px var(--dim);
      animation: flicker 3s infinite steps(60, end);
    }
    /* scanlines + vignette */
    .crt::before {
      content: "";
      position: absolute; inset: 0;
      background:
        repeating-linear-gradient(0deg, transparent 0px, transparent 2px, var(--scan) 3px, transparent 4px),
        radial-gradient(closest-side at 50% 50%, transparent 60%, rgba(0,0,0,0.4) 100%);
      pointer-events: none;
      mix-blend-mode: screen;
    }
    @keyframes flicker {
      0%,19%,21%,23%,80%,100% { opacity: 1; }
      20%,22% { opacity: 0.98; }
      24% { opacity: 0.97; }
    }
    .wrap {
      width: min(900px, 96vw);
      height: min(640px, 92vh);
      padding: 16px 20px;
      background: rgba(0, 12, 6, 0.65);
      border: 1px solid var(--dim);
      box-shadow: inset 0 0 40px rgba(0,255,153,0.08), 0 0 80px rgba(0,255,102,0.12);
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
    }
    .header, .footer {
      font-size: 12px;
      opacity: 0.9;
      display: flex; justify-content: space-between;
      white-space: nowrap;
    }
    .terminal {
      overflow: hidden;
      display: grid;
      place-items: center;
    }
    pre {
      margin: 0;
      line-height: 1.05;
      white-space: pre;
      font-size: clamp(10px, 2.2vw, 18px);
      text-align: center;
    }
    .blink { animation: blink 1s steps(1,end) infinite; }
    @keyframes blink { 50% { opacity: 0; } }

    /* crossed bones background (subtle) */
    .bones {
      position: absolute; inset: 0;
      background-image:
        radial-gradient(circle at 25% 30%, rgba(0,255,102,0.04) 0 2px, transparent 3px),
        radial-gradient(circle at 75% 70%, rgba(0,255,102,0.035) 0 2px, transparent 3px);
      filter: blur(0.3px);
      pointer-events: none;
    }

    .btn {
      display: inline-block;
      padding: 8px 12px;
      border: 1px solid var(--green);
      text-decoration: none;
      color: var(--green);
      margin-left: 6px;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div class="crt">
    <div class="bones"></div>
    <div class="wrap">
      <div class="header">
        <div>BOOT&gt; /dev/tty0 &nbsp;|&nbsp; mode: SAFE DEMO</div>
        <div id="status">initializing<span class="blink">_</span></div>
      </div>

      <div class="terminal">
        <pre id="art">connecting<span class="blink">_</span></pre>
      </div>

      <div class="footer">
        <div>© <span id="year"></span> <span id="credit">@your_name</span></div>
        <div>
          <span id="tip">tap anywhere to replay</span>
          <a class="btn hidden" id="share" href="#">share</a>
        </div>
      </div>
    </div>
  </div>

  <script>
  // --- Settings --------------------------------------------------------------
  const DEFAULT_USERNAME = "@your_name"; // fallback if no ?u= parameter
  const LAUGHS = 12;           // how many mouth open/close frames
  const FRAME_MS = 140;        // speed of animation
  const HOLD_END_MS = 1800;    // hold the final screen
  // --------------------------------------------------------------------------

  // tiny helper: read ?u= from URL for credit
  function getParam(name) {
    const m = new URLSearchParams(location.search).get(name);
    return m && m.trim() ? m.trim() : null;
  }

  // Binary skull frames (two mouths for "laugh")
  const frameClosed = String.raw`
000000000000000000000000000000000000000000000000000000
000000000000000001111111111111111000000000000000000000
000000000000001110000000000000000111000000000000000000
000000000000011000111111111111110001100000000000000000
000000000001100111100000000000011110011000000000000000
000000000011001110000000000000000111001100000000000000
000000000110011000111111111111110001100110000000000000
000000001100110011100000000000011100110011000000000000
000000011001100111000011111111000111001100110000000000
000000110011001110001100000000110001110011001100000000
000000110011001100011000111110001100110011001100000000
000000110011001100011001100001100110011001001100000000
000000110011001100011001100001100110011001001100000000
000000110011001100011000111110001100110011001100000000
000000110011001110001100000000110001110011001100000000
000000011001100111000011111111000111001100110000000000
000000001100110011100000000000011100110011000000000000
000000000110011000111111111111110001100110000000000000
000000000011001110000000000000000111001100000000000000
000000000001100111100000000000011110011000000000000000
000000000000011000111111111111110001100000000000000000
000000000000001110000000000000000111000000000000000000
000000000000000001111111111111111000000000000000000000
000000000000000000000110000001100000000000000000000000
000000000000000000001100111100110000000000000000000000
000000000000000000001100111100110000000000000000000000
000000000000000000000110000001100000000000000000000000`.trim();

  const frameOpen = String.raw`
000000000000000000000000000000000000000000000000000000
000000000000000001111111111111111000000000000000000000
000000000000001110000000000000000111000000000000000000
000000000000011000111111111111110001100000000000000000
000000000001100111100000000000011110011000000000000000
000000000011001110000000000000000111001100000000000000
000000000110011000111111111111110001100110000000000000
000000001100110011100000000000011100110011000000000000
000000011001100111000011111111000111001100110000000000
000000110011001110001100000000110001110011001100000000
111111110011001100011000111110001100110011001111111111
111111110011001100011001100001100110011001001111111111
111111110011001100011001100001100110011001001111111111
000000110011001100011000111110001100110011001100000000
000000110011001110001100000000110001110011001100000000
000000011001100111000011111111000111001100110000000000
000000001100110011100000000000011100110011000000000000
000000000110011000111111111111110001100110000000000000
000000000011001110000000000000000111001100000000000000
000000000001100111100000000000011110011000000000000000
000000000000011000111111111111110001100000000000000000
000000000000001110000000000000000111000000000000000000
000000000000000001111111111111111000000000000000000000
000000000000000000000110000001100000000000000000000000
000000000000000000001100111100110000000000000000000000
000000000000000000001100111100110000000000000000000000
000000000000000000000110000001100000000000000000000000`.trim();

  const fakeBoot = [
    "loading kernel modules … ok",
    "mounting /dev/null … ok",
    "spawning process: skull.bin … ok",
    "allocating memory … ok",
    "warning: unauthorized access",
    "establishing link … ok",
    "rendering payload … ok"
  ];

  const art = document.getElementById("art");
  const status = document.getElementById("status");
  const year = document.getElementById("year");
  const credit = document.getElementById("credit");
  const shareBtn = document.getElementById("share");
  year.textContent = new Date().getFullYear();

  // credit from URL ?u=YourName
  const u = getParam("u");
  credit.textContent = (u ? (u.startsWith("@") ? u : "@"+u) : DEFAULT_USERNAME);

  function typeLines(lines, i = 0) {
    return new Promise(resolve => {
      if (i >= lines.length) return resolve();
      status.textContent = lines[i];
      setTimeout(() => resolve(typeLines(lines, i+1)), 220);
    });
  }

  function animateLaughs() {
    return new Promise(resolve => {
      let n = 0, open = false;
      const timer = setInterval(() => {
        art.textContent = open ? frameOpen : frameClosed;
        open = !open;
        n++;
        if (n >= LAUGHS) {
          clearInterval(timer);
          resolve();
        }
      }, FRAME_MS);
    });
  }

  function endScreen() {
    status.innerHTML = 'status: <b style="color:var(--green)">SAFE DEMO</b>';
    art.textContent =
      frameClosed +
      "\n\n" +
      ">> TRANSMISSION COMPLETE <<\n" +
      `CREDITS: ${credit.textContent}\n` +
      "tap to replay ▷";
    shareBtn.classList.remove("hidden");
    if (navigator.share) {
      shareBtn.onclick = () => {
        navigator.share({
          title: "sys32 demo",
          text: "Check this retro skull demo",
          url: location.href
        }).catch(()=>{});
      };
    } else {
      shareBtn.href = location.href;
    }
  }

  async function run() {
    art.textContent = "booting<span class='blink'>_</span>";
    await typeLines(fakeBoot);
    status.innerHTML = "payload: <b>0xDEADBEEF</b>";
    await animateLaughs();
    setTimeout(endScreen, HOLD_END_MS);
  }

  run();
  addEventListener("click", run);
  addEventListener("keydown", e => { if (e.key === "Enter" || e.key === " ") run(); });
  </script>
</body>
</html>
